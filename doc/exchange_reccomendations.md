<p>There are some important things to note about exchange support for MWC. As with all POW blockchains, reorgs and double spend attacks are possible. With Mimblewimble, it is harder to detect the attacks because there are no addresses and only outputs. The network is young and reorgs have happened in our early history.
<p>
<p>The current mwc-wallet (2.4.6) has a check feature that can help detect double spends or coins that no longer appear after a long reorg, but it is based on the grin 2.0 wallet and has some bugs. The most reliable way to detect double spends is do a recovery from seed.
<p>
<p>In master of our github, we have the rebased 3.0 wallet from grin and will be releaseing it shortly. We also have made several fixes on top of the grin wallet which to fix additional bugs related to double spends and reorgs. We are still testing these features, but will release the mwc-wallet soon. It can be built from master and used for testing now.
<p>
<p>Reorgs are getting harder to do, but we still recommend a high number of confirmations to ensure funds are secured. Exchanges should sweep funds with a required number of confirmations to a secondary wallet before crediting user accounts. This will ensure that funds are really spendable by the exchange before the users are able to access them. This can be done by using the --min_conf parameter in mwc-wallet to make sure only confirmed funds are transfered.
<p>
<p>In addition to requiring a particular number of confirmations, it is necessary to check that outputs still exist on the blockchain before honoring deposits. This is because in mimblewimble, the state of a wallet may be different than the network. Please note that the wallet is not designed for use out of the box to meet all exchange needs. It is mainly designed to receive and send payments for a single user where they can maunally check which outputs have confirmed and which have not and run the 'check' or 'scan_outputs' command as required. For an exchange they must implement this logic themselves because they need to know which outputs are orphaned specifically so they know which deposits to credit and which to not credit, as many deposits/withdrawals are happening at the same time. The way to make sure the output was not reorged out or part of a double spend transaction is to query a full node. If you are using http payments, you will likely need to log the slates in a proxy and process the slate to find which outputs the deposit is associated with. After a number of confirmations are complete, the output should be checked by querying a full node to ensure the output is still present on the blockchain. Only then should the deposit be honored. For file based exchanges, it is easier because the slate file can just be parsed to find which output needs to be confrimed through a full node after sufficient confirmations. It is essential to do this.
<p>
<p>We prefer exchanges that have higher number of confirmations. TradeOgre currently apepars to have the most confirmations. We suggest 1,500 confirmations to be really safe.
